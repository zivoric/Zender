!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Zender=t():e.Zender=t()}(self,(function(){return function(){"use strict";var e={745:function(e,t,n){var r=n(81),o=n.n(r),i=n(645),a=n.n(i),s=n(667),c=n.n(s),l=new URL(n(554),n.b),u=new URL(n(98),n.b),p=new URL(n(310),n.b),f=new URL(n(675),n.b),d=new URL(n(838),n.b),m=new URL(n(942),n.b),h=new URL(n(336),n.b),b=new URL(n(253),n.b),y=new URL(n(339),n.b),g=new URL(n(536),n.b),v=new URL(n(892),n.b),z=new URL(n(116),n.b),w=new URL(n(402),n.b),k=new URL(n(893),n.b),x=a()(o());x.push([e.id,"@import url(https://fonts.googleapis.com/css2?family=Courier+Prime&display=swap);"]);var j=c()(l),O=c()(u),S=c()(p),A=c()(f),T=c()(d),C=c()(m),E=c()(h),_=c()(b),M=c()(y),P=c()(g),R=c()(v),L=c()(z),I=c()(w),U=c()(k);x.push([e.id,'@font-face{font-family:"XITS";src:url('+j+')}@font-face{font-family:"XITS";src:url('+O+');font-style:italic}@font-face{font-family:"XITS";src:url('+S+');font-weight:bold}@font-face{font-family:"XITS";src:url('+A+');font-weight:bold;font-style:italic}@font-face{font-family:"XITS Math";src:url('+T+')}@font-face{font-family:"XITS Math";src:url('+C+');font-weight:bold}[z-field]:focus z-contents z-cursor{border-right-color:currentColor;-webkit-animation:blink 1s step-start .5s infinite;animation:blink 1s step-start .5s infinite}[z-field]:focus z-contents z-cursor[noblink]{-webkit-animation:none;animation:none}[z-field]:focus z-contents z-selection{background-color:#accef7}[z-field]:focus z-contents z-selection z-cursor{-webkit-animation:none;animation:none;border-right-color:rgba(0,0,0,0)}[z-field] z-contents{font:1em "XITS","XITS Math",serif;font-variant-ligatures:none;font-kerning:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;display:inline-block}[z-field] z-contents *{box-sizing:border-box;text-align:center;line-height:120%}[z-field] z-contents z-sscript>*:empty::before,[z-field] z-contents z-frac>*:empty::before,[z-field] z-contents z-root>*:empty::before{content:"​";display:inline-block;width:1ch;height:1em;background-color:rgba(0,0,0,.15)}[z-field] z-contents z-cursor{height:1em;width:0;margin-right:-1px;display:inline;border-right:1px solid rgba(0,0,0,0)}[z-field] z-contents z-cursor:only-child{margin-right:calc(1ch - 1px)}@-webkit-keyframes blink{50%{opacity:0}}@keyframes blink{50%{opacity:0}}[z-field] z-contents z-selection{display:inline-block;background-color:#d1d1d1}[z-field] z-contents z-num,[z-field] z-contents z-op,[z-field] z-contents z-func{font-style:normal;font-kerning:normal}[z-field] z-contents z-num,[z-field] z-contents z-op,[z-field] z-contents z-func,[z-field] z-contents z-var{display:inline-block}[z-field] z-contents z-op[spaced]{padding:0 .2em}[z-field] z-contents z-func{padding:0 .1em}[z-field] z-contents z-var{font-size:1em;min-width:.8ch}[z-field] z-contents z-var[italic]{font-style:italic}[z-field] z-contents z-latex{font-family:"Courier Prime","Courier New",monospace;min-width:calc(2ch + .5em);border:1px solid #a4a4a4;padding:0 .2em;margin:0 .2em;display:inline-block;text-align:left}[z-field] z-contents z-latex *{line-height:100%}[z-field] z-contents z-latex::before{content:"$"}[z-field] z-contents z-latex z-var[italic]{font-style:normal}[z-field] z-contents z-latex z-op{padding:0}[z-field] z-contents z-sscript,[z-field] z-contents z-frac{display:inline-block}[z-field] z-contents z-sscript z-sup,[z-field] z-contents z-sscript z-sub,[z-field] z-contents z-sscript z-numer,[z-field] z-contents z-sscript z-denom,[z-field] z-contents z-frac z-sup,[z-field] z-contents z-frac z-sub,[z-field] z-contents z-frac z-numer,[z-field] z-contents z-frac z-denom{display:block}[z-field] z-contents z-sscript z-sub,[z-field] z-contents z-sscript z-denom,[z-field] z-contents z-frac z-sub,[z-field] z-contents z-frac z-denom{float:left}[z-field] z-contents z-sscript::after,[z-field] z-contents z-frac::after{content:"";display:inline-block}[z-field] z-contents z-sscript{vertical-align:-0.6em;padding-right:.1em;margin-bottom:-0.4em}[z-field] z-contents z-sscript z-sup,[z-field] z-contents z-sscript z-sub{font-size:.75em;text-align:left}[z-field] z-contents z-sscript z-sscript{margin-bottom:0}[z-field] z-contents z-frac{vertical-align:-0.55em}[z-field] z-contents z-frac z-numer,[z-field] z-contents z-frac z-denom{font-size:.8em;padding:0 .4em;width:100%}[z-field] z-contents z-frac z-numer{padding-bottom:0;border-bottom:.05em solid currentColor}[z-field] z-contents z-frac z-numer>z-frac{margin-bottom:-0.2em}[z-field] z-contents z-frac z-denom{padding-top:.15em}[z-field] z-contents z-frac z-denom>z-sscript{margin-bottom:-0.2em}[z-field] z-contents z-root{display:inline-flex;flex-wrap:wrap-reverse;justify-content:flex-end;padding:0 .1em}[z-field] z-contents z-root>z-ord{float:left;text-align:left;align-self:flex-end;order:1;margin-bottom:-0.75em;margin-right:-0.25em;flex-basis:100%;font-size:.75em;min-width:.5em}[z-field] z-contents z-root>z-arg{display:inline-block;padding:.15em;padding-bottom:0;margin-left:-0.04em;border-top:.05em currentColor solid}[z-field] z-contents z-root::before{padding-right:.75em;content:"";-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-position:top;mask-position:top;-webkit-mask-size:100% calc(100% - .15em);mask-size:100% calc(100% - .15em);-webkit-mask-image:url('+E+");mask-image:url("+E+');background-color:currentColor}[z-field] z-contents z-root::after{content:"​";order:-1;align-self:center}[z-field] z-contents z-brackets{display:inline-table;margin:.2em 0}[z-field] z-contents z-brackets[ghost=left]::before,[z-field] z-contents z-brackets[ghost=right]::after,[z-field] z-contents z-brackets[ghost=both]::before,[z-field] z-contents z-brackets[ghost=both]::after{opacity:.4}[z-field] z-contents z-brackets::before,[z-field] z-contents z-brackets::after{width:.5em;-webkit-mask-size:43% 100%;mask-size:43% 100%;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;content:"​";display:table-cell;-webkit-mask-position:center;mask-position:center;background-color:currentColor}[z-field] z-contents z-brackets::before{-webkit-mask-image:url('+_+");mask-image:url("+_+")}[z-field] z-contents z-brackets::after{-webkit-mask-image:url("+M+");mask-image:url("+M+")}[z-field] z-contents z-brackets[type=square]::before{-webkit-mask-image:url("+P+");mask-image:url("+P+")}[z-field] z-contents z-brackets[type=square]::after{-webkit-mask-image:url("+R+");mask-image:url("+R+")}[z-field] z-contents z-brackets[type=curly]::before{-webkit-mask-image:url("+L+");mask-image:url("+L+")}[z-field] z-contents z-brackets[type=curly]::after{-webkit-mask-image:url("+I+");mask-image:url("+I+")}[z-field] z-contents z-brackets[type=abs]::before,[z-field] z-contents z-brackets[type=abs]::after{-webkit-mask-image:url("+U+");mask-image:url("+U+')}[z-field] z-contents z-int{display:inline-block;padding:.4em .3em .4em 0}[z-field] z-contents z-int::before{content:"∫";font-size:1.35em;display:inline-block}[z-field] z-contents z-int+z-sscript,[z-field] z-contents z-int+z-cursor+z-sscript,[z-field] z-contents z-int+z-selection>z-sscript:first-child{margin-left:-0.3em;padding-right:.25em}[z-field] z-contents z-int+z-sscript>z-sub,[z-field] z-contents z-int+z-cursor+z-sscript>z-sub,[z-field] z-contents z-int+z-selection>z-sscript:first-child>z-sub{transform:translate(-0.2em, 0.4em)}[z-field] z-contents z-int+z-sscript>z-sup,[z-field] z-contents z-int+z-cursor+z-sscript>z-sup,[z-field] z-contents z-int+z-selection>z-sscript:first-child>z-sup{transform:translate(0.45em, -0.4em)}',""]),t.Z=x},645:function(e){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);r&&a[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),t.push(u))}},t}},667:function(e){e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},81:function(e){e.exports=function(e){return e[1]}},379:function(e){var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},a=[],s=0;s<e.length;s++){var c=e[s],l=r.base?c[0]+r.base:c[0],u=i[l]||0,p="".concat(l," ").concat(u);i[l]=u+1;var f=n(p),d={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==f)t[f].references++,t[f].updater(d);else{var m=o(d,r);r.byIndex=s,t.splice(s,0,{identifier:p,updater:m,references:1})}a.push(p)}return a}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var i=r(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var s=n(i[a]);t[s].references--}for(var c=r(e,o),l=0;l<i.length;l++){var u=n(i[l]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}i=c}}},569:function(e){var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:function(e){e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:function(e,t,n){e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:function(e){e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:function(e){e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},116:function(e){e.exports='data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="100 70 250 862" preserveAspectRatio="none"> <path fill="currentColor" d="M350 920v11c-67 -1 -93 -7 -121 -25s-44 -59 -44 -115v-177c0 -69 -18 -93 -85 -114c67 -20 85 -43 85 -113v-178c0 -57 15 -96 44 -114s55 -24 121 -25v11c-69 18 -91 48 -91 123v168c0 83 -19 109 -94 129c75 19 94 45 94 128v168c0 75 22 105 91 123z"/></svg>'},336:function(e){e.exports='data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="112 -222 850 1200" preserveAspectRatio="none"> <path fill="currentColor" d="M963 -223l-478 1232h-32l-202 -530c-17 -45 -37 -59 -62 -59c-17 0 -43 11 -65 31l-12 -20l156 -124h19l204 536h4l414 -1066h54z" /> </svg>'},402:function(e){e.exports='data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="130 70 250 862" preserveAspectRatio="none"> <path fill="currentColor" d="M295 210v177c0 70 18 93 85 113c-67 21 -85 44 -85 114v178c0 57 -15 96 -44 114s-55 24 -121 25v-11c69 -18 91 -48 91 -123v-168c0 -83 19 -109 94 -129c-75 -19 -94 -44 -94 -128v-168c0 -75 -22 -105 -91 -123v-11c67 1 93 7 121 25s44 59 44 115z"/></svg>'},893:function(e){e.exports='data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="20 60 275 880" preserveAspectRatio="none"> <path fill="currentColor" d="M193 939h-66v-879h66v879z"/> </svg>'},339:function(e){e.exports='data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="29 72 256 858" preserveAspectRatio="none">   <path fill="currentColor" d="M29 90l12 -16c153 92 244 259 244 429c0 185 -88 327 -247 424l-9 -16c142 -117 170 -211 170 -405c0 -187 -25 -302 -170 -416z"/></svg>'},892:function(e){e.exports='data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="34 88 211 819" preserveAspectRatio="none"> <path fill="currentColor" d="M245 906h-211v-25h88c35 0 47 -15 47 -46v-668c0 -35 -13 -54 -51 -54h-84v-25h211v818z"/></svg>'},253:function(e){e.exports='data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="48 73 256 860" preserveAspectRatio="none"> <path fill="currentColor" d="M304 911l-12 16c-158 -90 -244 -259 -244 -429c0 -185 87 -329 247 -424l9 16c-139 119 -170 212 -170 405c0 186 30 299 170 416z"/></svg>'},536:function(e){e.exports='data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="88 88 211 819" preserveAspectRatio="none"> <path fill="currentColor" d="M299 906h-211v-818h211v25h-83c-34 0 -52 12 -52 48v666c0 40 19 54 52 54h83v25z"/></svg>'},310:function(e,t,n){e.exports=n.p+"2344a7deca7ee7bd4f22.woff"},675:function(e,t,n){e.exports=n.p+"ef17917de8c54e17c82c.woff"},98:function(e,t,n){e.exports=n.p+"44589c1a5ad7a7a33150.woff"},554:function(e,t,n){e.exports=n.p+"a6dbd3db439622ae1081.woff"},942:function(e,t,n){e.exports=n.p+"a40ac5ca19cd5a81792f.woff"},838:function(e,t,n){e.exports=n.p+"cb029638e4d9272b364d.woff"}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,exports:{}};return e[r](i,i.exports,n),i.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e}(),n.b=document.baseURI||self.location.href,n.nc=void 0;var r={};return function(){n.r(r),n.d(r,{DOMProcessor:function(){return t},LaTeXProcessor:function(){return e},getAPI:function(){return Re}});var e={};n.r(e),n.d(e,{parse:function(){return ue},parseRegex:function(){return ae}});var t={};n.r(t),n.d(t,{argOrders:function(){return xe},convertChars:function(){return ve},convertCharsReverse:function(){return ze},fromDOM:function(){return _e},fromDOMItem:function(){return Me},fromIndex:function(){return Ae},getGroup:function(){return Se},inputKey:function(){return Oe},opChars:function(){return ge},selectionIndex:function(){return Te},simpleOps:function(){return je},toDOM:function(){return Ee}});var o=n(379),i=n.n(o),a=n(795),s=n.n(a),c=n(569),l=n.n(c),u=n(565),p=n.n(u),f=n(216),d=n.n(f),m=n(589),h=n.n(m),b=n(745),y={};function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}y.styleTagTransform=h(),y.setAttributes=p(),y.insert=l().bind(null,"head"),y.domAPI=s(),y.insertStyleElement=d(),i()(b.Z,y),b.Z&&b.Z.locals&&b.Z.locals;var k=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),w(this,"_default",void 0),w(this,"_options",void 0),this._default=t,this._options=e.default(t,null!=n?n:t)}var t,n,r;return t=e,n=[{key:"options",get:function(){return this._options},set:function(t){this._options=e.default(this._default,t)}},{key:"updateOptions",value:function(t){this._options=e.default(this._options,t)}}],r=[{key:"default",value:function(e,t){return v(v({},e),t)}}],n&&z(t.prototype,n),r&&z(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function j(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,O(e,t,"get"))}function O(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t,n){return t&&T(e.prototype,t),n&&T(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=R(e);if(t){var o=R(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}(this,n)}}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e){E(n,e);var t=M(n);function n(e,r){var o,i,a;return A(this,n),L(P(i=t.call(this,n._defaultOptions,r)),"_element",void 0),L(P(i),"_contents",void 0),e.setAttribute("z-field",""),i._element=e,i._contents=document.createElement("z-contents"),"dom"===i.options.format.toLowerCase()&&(o=i._contents).append.apply(o,function(e){if(Array.isArray(e))return S(e)}(a=e.children)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),e.append(i._contents),i}return C(n,[{key:"contentHTML",get:function(){return this._contents}},{key:"contentJS",get:function(){return _e(this.contentHTML.children,!1)},set:function(e){this.contentHTML.replaceChildren(Ee(e,!1))}},{key:"element",get:function(){return this._element}}]),n}(k);L(I,"_defaultOptions",{allowVariables:!0,allowFunctions:!0,format:"latex"});var U=new WeakMap,D=function(e){E(n,e);var t=M(n);function n(e,r){var o,i,a,s;return A(this,n),i=P(o=t.call(this,e,r)),s={writable:!0,value:!1},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(i,a=U),a.set(i,s),e.setAttribute("tabindex","-1"),o.contentHTML.append(document.createElement("z-cursor")),e.addEventListener("mousedown",(function(e){j(P(o),U)&&e.preventDefault()})),e.addEventListener("documentpaste",(function(e){var t,n=null===(t=e.detail.clipboardData)||void 0===t?void 0:t.getData("text");if(n&&n.length>0){var r,i=o.contentHTML.querySelector("z-cursor");i&&(null===(r=i.parentNode)||void 0===r||r.insertBefore(Ee(ue(n)),i))}})),e.addEventListener("keydown",(function(e){if(!e.ctrlKey){e.preventDefault();var t=o.selectableContent;Oe(e.key,e.shiftKey,t),o.selectableContent=t}})),o}return C(n,[{key:"selectableContent",get:function(){return _e(this.contentHTML.children,!0)},set:function(e){this.contentHTML.replaceChildren(Ee(e,!0))}},{key:"disabled",get:function(){return j(this,U)},set:function(e){!function(e,t,n){(function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}})(e,O(e,t,"set"),n)}(this,U,!!e)}}]),n}(I);function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function B(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X(e,t)}function N(e){var t="function"==typeof Map?new Map:void 0;return N=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return q(e,arguments,$(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),X(r,e)},N(e)}function q(e,t,n){return q=H()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&X(o,n.prototype),o},q.apply(null,arguments)}function H(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function X(e,t){return X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},X(e,t)}function $(e){return $=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},$(e)}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t,n){return t&&K(e.prototype,t),n&&K(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var J=["contents","cursor","selection","sscript","frac","root","num","op","func","var","sup","sub","numer","denom","ord","arg","brackets","int"],Q=new WeakMap,V=function(){function e(){var t,n,r;W(this,e),t=this,n=Q,r={writable:!0,value:new Map},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,n),n.set(t,r);var o,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(J);try{for(i.s();!(o=i.n()).done;){var a=o.value;customElements.define("z-"+a,function(e){B(o,e);var t,n,r=(t=o,n=H(),function(){var e,r=$(t);if(n){var o=$(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===F(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function o(){return W(this,o),r.apply(this,arguments)}return G(o)}(N(HTMLElement)))}}catch(e){i.e(e)}finally{i.f()}document.addEventListener("paste",(function(e){var t;null===(t=document.activeElement)||void 0===t||t.dispatchEvent(new CustomEvent("documentpaste",{detail:{clipboardData:e.clipboardData}}))}))}return G(e,[{key:"text",value:function(e,t){return new I(e,t)}},{key:"field",value:function(e,t){return new D(e,t)}}]),e}(),Y=(Symbol(),Symbol(),Symbol());function ee(e){return function(e){if(Array.isArray(e))return te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?te(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}var re={Delta:"∆",Gamma:"Γ",Lambda:"Λ",Omega:"Ω",Phi:"Φ",Pi:"Π",Psi:"Ψ",Sigma:"Σ",Theta:"Θ",Upsilon:"Υ",Xi:"Ξ",aleph:"ℵ",alpha:"α",beta:"β",chi:"χ",delta:"δ",digamma:"ϝ",epsilon:"ϵ",eta:"η",gamma:"γ",iota:"ι",kappa:"κ",lambda:"λ",mu:"µ",nu:"ν",omega:"ω",phi:"ϕ",pi:"π",psi:"ψ",rho:"ρ",sigma:"σ",tau:"τ",theta:"θ",upsilon:"υ",varepsilon:"ε",varkappa:"ϰ",varphi:"φ",varpi:"ϖ",varrho:"ϱ",varsigma:"ς",vartheta:"ϑ",xi:"ξ",zeta:"ζ"},oe=["int"],ie=["^","_"],ae=/((\\left(\\{|(\\?[{[(|]))|{).*?(\\right(\\}|(\\?[}\])|]))|}))|(\\[a-z]+)|(\\.)|./gi,se={sqrt:"root"},ce={sqrt:1},le={"[":"square","{":"curly","(":"","|":"abs"};function ue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"convert",n=e.match(ae);return pe(null!=n?n:[],t)}function pe(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"convert",n=[];e.length>0;){var r=e.splice(0,1)[0];try{if(r.startsWith("\\left")&&-1!=r.indexOf("\\right")){var o=r.substring(5,6);"\\"==o&&(o=r.substring(6,7)),n.push({type:le[o],contents:ue(r.substring(r.indexOf(o)+1,r.indexOf("\\right")),t)})}else if("\\"==r.charAt(0)||ie.includes(r)){var i=void 0,a=void 0;if("\\"==r.charAt(0)){if(1==(i=r.substring(1)).length){n.push(i);continue}a=i,i in se&&(i=se[i])}else a=i=r;if("^"==i){var s,c=ue(e.splice(0,1)[0],t),l=n[n.length-1];n.length>0&&"object"==ne(l)&&"operator"in l&&"sscript"==l.operator?"sup"in l.arguments?(s=l.arguments.sup).push.apply(s,ee(c)):l.arguments.sup=c:n.push({operator:"sscript",arguments:{sup:c}})}else if("_"==i){var u,p=ue(e.splice(0,1)[0],t),f=n[n.length-1];n.length>0&&"object"==ne(f)&&"operator"in f&&"sscript"==f.operator?"sub"in f.arguments?(u=f.arguments.sub).push.apply(u,ee(p)):f.arguments.sub=p:n.push({operator:"sscript",arguments:{sub:p}})}else if(i in xe){for(var d={},m=(a in ce?ce[a]:0),h=m,b=xe[i],y=0;m+y<b.length;y++)if(0!=e.length){var g=e.splice(0,1)[0];if(g.startsWith("[")&&h){var v=e.indexOf("]");if(-1!=v){var z=e.splice(0,v+1).slice(0,v);d[b[m-h+y]]=pe(z,t),h--,y--}else h=0,d[b[m+y]]=ue(g,t)}else h&&(h=0),d[b[m+y]]=ue(g,t)}else d[b[m+y]]=[];n.push({operator:i,arguments:d})}else if(a in re)n.push(re[a]);else if(oe.includes(a))n.push({operator:i,arguments:{}});else switch(t){case"include":n.push({operator:i,arguments:{}});break;case"remove":break;default:n.push.apply(n,ee(Array.from(a)))}}else r.startsWith("{")&&r.endsWith("}")?n.push.apply(n,ee(ue(r.substring(1,r.length-1),t))):r.trim().length>0&&n.push(r)}catch(e){}}return n}function fe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=me(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function de(e){return function(e){if(Array.isArray(e))return he(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||me(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function me(e,t){if(e){if("string"==typeof e)return he(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?he(e,t):void 0}}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function be(e){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},be(e)}var ye=function(e){return e==Y||"object"==be(e)&&"selection"in e},ge=["=","+","-","*","/","!","%","<",">"," "],ve={"*":"⋅","-":"−"},ze={};for(var we in ve)ze[ve[we]]=we;var ke,xe={frac:["numer","denom"],sscript:["sup","sub"],root:["ord","arg"]},je=["int"];function Oe(e,t,n){var r=Te(n),o=Ae(n,r),i="symbol"==be(o),a=Ae(n,r,1),s=Se(a),c=r.length>=2?Ae(n,r,2):void 0,l=r[r.length-2],u=r[r.length-1];delete s[u];var p,f=s.splice(0,u),d=s.splice(1),m=i?[]:o.selection,h=i?f:m,b=i?d:m,y=i?[]:f,g=i?[]:d,v=!0;switch(e.toLowerCase()){case"backspace":if(i)if(f.length>0){var z=f[f.length-1];if("object"==be(z))if("operator"in z){var w=Object.keys(z.arguments);w.length>0?z.arguments[w[w.length-1]].push(Y):(f.pop(),f.push(Y))}else Se(z).push(Y);else f.pop(),f.push(Y);s.push.apply(s,de(f).concat(de(d)))}else if(r.length>2&&"operator"in c){var k,x=r[r.length-2],j=Se(Ae(n,r,3)),O=r[r.length-3];(k=c.arguments[x]).push.apply(k,[Y].concat(de(d)));var S=c.arguments[x],A=Object.values(c.arguments).flat();delete c.arguments[x];var T=Object.keys(c.arguments).length;"sscript"===c.operator?0==T?j.splice.apply(j,[O,1].concat(de(A))):"sup"==x?j.splice.apply(j,[O+1,0,Y].concat(de(S))):j.splice.apply(j,[O,0,Y].concat(de(S))):j.splice.apply(j,[O,1].concat(de(A)))}else if(r.length>1){var C=Se(c);"latex"in a?C.splice(l,1,Y):C.splice.apply(C,[l,1,Y].concat(de(d)))}else s.push.apply(s,[Y].concat(de(d)));else s.push.apply(s,de(f).concat([Y],de(d)));break;case"arrowleft":if(t){var E=i||o.pivot,_=!0;if(E){if(f.length>0)m.unshift(f.pop());else if(r.length>1){var M="operator"in c?3:2,P=Se(Ae(n,r,M)),R=r[r.length-M];P.splice(R,0,{selection:P.splice(R,1),pivot:E})}}else if(1==m.length&&"object"==be(m[0])){var L=m[0];(_="operator"in L?!Object.values(L.arguments).some((function(e){return e.some(ye)})):!Se(L).some(ye))||d.unshift(m.pop())}else d.unshift(m.pop());_&&(0==m.length?f.push(Y):f.push({selection:m,pivot:E})),s.push.apply(s,de(f).concat(de(d)))}else if(i){if(f.length>0){var I=f[f.length-1];if("object"==be(I))if("operator"in I){var U=Object.keys(I.arguments);U.length>0?I.arguments[U[U.length-1]].push(Y):f.splice(f.length-1,0,Y)}else Se(I).push(Y);else f.splice(f.length-1,0,Y)}else if(c)if("operator"in c){var D=Object.keys(c.arguments),F=D.indexOf(l);F>0?c.arguments[D[F-1]].push(Y):Se(Ae(n,r,3)).splice(r[r.length-3],0,Y)}else Se(c).splice(l,0,Y);else f.push(Y);s.push.apply(s,de(f).concat(de(d)))}else s.push.apply(s,de(f).concat([Y],de(m),de(d)));break;case"arrowright":if(t){var B=!i&&o.pivot,N=!0;if(B)if(1==m.length&&"object"==be(m[0])){var q=m[0];(N="operator"in q?!Object.values(q.arguments).some((function(e){return e.some(ye)})):!Se(q).some(ye))||f.push(m.shift())}else f.push(m.shift());else if(d.length>0)m.push(d.shift());else if(r.length>1){var H="operator"in c?3:2,X=Se(Ae(n,r,H)),$=r[r.length-H];X.splice($,0,{selection:X.splice($,1),pivot:B})}N&&(0==m.length?f.push(Y):f.push({selection:m,pivot:B})),s.push.apply(s,de(f).concat(de(d)))}else if(i){if(d.length>0){var Z=d[0];if("object"==be(Z))if("operator"in Z){var W=Object.keys(Z.arguments);W.length>0?Z.arguments[W[0]].unshift(Y):d.splice(1,0,Y)}else Se(Z).unshift(Y);else d.splice(1,0,Y)}else if(c)if("operator"in c){var K=Object.keys(c.arguments),G=K.indexOf(l);G<K.length-1?c.arguments[K[G+1]].unshift(Y):Se(Ae(n,r,3)).splice(r[r.length-3]+1,0,Y)}else Se(c).splice(l+1,0,Y);else d.unshift(Y);s.push.apply(s,de(f).concat(de(d)))}else s.push.apply(s,de(f).concat(de(m),[Y],de(d)));break;default:v=!1}if(!v)if("latex"in a)" "==e||"tab"==e.toLowerCase()||"enter"==e.toLowerCase()?(s.push.apply(s,de(f).concat(de(d))),(p=Se(c)).splice.apply(p,[l,1].concat(de(ue(a.latex.join(""))),[Y]))):1==e.length?s.push.apply(s,de(f).concat([e,Y],de(d))):s.push.apply(s,de(f).concat([Y],de(d)));else switch(e.toLowerCase()){case"\\":s.push.apply(s,de(f).concat([{latex:["\\",Y]}],de(d)));break;case"$":s.push.apply(s,de(f).concat([{latex:[Y]}],de(d)));break;case"/":s.splice.apply(s,[u,0].concat(de(y),[{operator:"frac",arguments:{numer:de(h),denom:[Y]}}],de(d)));break;case"^":if("sub"==l&&"sscript"==c.operator)c.arguments.sup?c.arguments.sup.push(Y):c.arguments.sup=[Y],s.push.apply(s,de(f).concat(de(m),de(d)));else{var J,Q=f.slice(f.length-1,f.length)[0],V=d.slice(0,1)[0];if("object"==be(Q)&&"operator"in Q&&"sscript"==Q.operator)Q.arguments.sup?(J=Q.arguments.sup).push.apply(J,de(m).concat([Y])):Q.arguments.sup=[].concat(de(m),[Y]),s.push.apply(s,de(f).concat(de(d)));else if("object"==be(V)&&"operator"in V&&"sscript"==V.operator){var ee;V.arguments.sup?(ee=V.arguments.sup).unshift.apply(ee,[Y].concat(de(m))):V.arguments.sup=[Y].concat(de(m)),s.push.apply(s,de(f).concat(de(d)))}else s.push.apply(s,de(f).concat([{operator:"sscript",arguments:{sup:[].concat(de(m),[Y])}}],de(d)))}break;case"_":if("sup"==l&&"sscript"==c.operator)c.arguments.sub?c.arguments.sub.push(Y):c.arguments.sub=[Y],s.push.apply(s,de(f).concat(de(m),de(d)));else{var te,ne=f.slice(f.length-1,f.length)[0],re=d.slice(0,1)[0];if("object"==be(ne)&&"operator"in ne&&"sscript"==ne.operator)ne.arguments.sub?(te=ne.arguments.sub).push.apply(te,de(m).concat([Y])):ne.arguments.sub=[].concat(de(m),[Y]),s.push.apply(s,de(f).concat(de(d)));else if("object"==be(re)&&"operator"in re&&"sscript"==re.operator){var oe;re.arguments.sub?(oe=re.arguments.sub).unshift.apply(oe,[Y].concat(de(m))):re.arguments.sub=[Y].concat(de(m)),s.push.apply(s,de(f).concat(de(d)))}else s.push.apply(s,de(f).concat([{operator:"sscript",arguments:{sub:[].concat(de(m),[Y])}}],de(d)))}break;case")":s.push.apply(s,de(y).concat([{type:"",contents:h},Y],de(d)));break;case"]":s.push.apply(s,de(y).concat([{type:"square",contents:h},Y],de(d)));break;case"}":s.push.apply(s,de(y).concat([{type:"curly",contents:h},Y],de(d)));break;case"(":s.push.apply(s,de(f).concat([{type:"",contents:[Y].concat(de(b))}],de(g)));break;case"[":s.push.apply(s,de(f).concat([{type:"square",contents:[Y].concat(de(b))}],de(g)));break;case"{":s.push.apply(s,de(f).concat([{type:"curly",contents:[Y].concat(de(b))}],de(g)));break;case"|":s.push.apply(s,de(f).concat([{type:"abs",contents:[Y].concat(de(b))}],de(g)));break;default:1==e.length&&(/[a-zA-Z0-9\.]/.test(e)||ge.includes(e))?s.push.apply(s,de(f).concat([e,Y],de(d))):s.push.apply(s,de(f).concat([o],de(d)))}}function Se(e){var t=[];return Array.isArray(e)?e:("object"==be(e)&&("contents"in e?t=e.contents:"display"in e?t=e.display:"selection"in e?t=e.selection:"latex"in e&&(t=e.latex)),t)}function Ae(e,t,n){var r=e;n&&(t=t.slice(0,t.length-n));var o,i=fe(t);try{for(i.s();!(o=i.n()).done;){var a=o.value;if(!r)break;if("number"==typeof a)r=Array.isArray(r)?r[a]:Se(r)[a];else{if("object"!=be(r)||!("arguments"in r)){r=void 0;break}r=r.arguments[a]}}}catch(e){i.e(e)}finally{i.f()}return r}function Te(e){var t=[],n=e.findIndex((function(e){return e==Y||"object"==be(e)&&"selection"in e}));if(-1!=n)t.push(n);else for(var r in e){var o=parseInt(r),i=e[o],a=void 0;if((a="object"==be(i)?"operator"in i?Ce(i.arguments):Te(Se(i)):[]).length>0){t.push.apply(t,[o].concat(de(a)));break}}return t}function Ce(e){for(var t=[],n=0,r=Object.keys(e);n<r.length;n++){var o=r[n],i=Te(e[o]);if(i.length>0){t.push.apply(t,[o].concat(de(i)));break}}return t}function Ee(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=!n||e.some(ye),i=new DocumentFragment,a=fe(e);try{for(a.s();!(t=a.n()).done;){var s=t.value;if("object"==be(s)){var c=void 0;"operator"in s?function(){var e,t=s.operator;(e=c=document.createElement("z-"+t)).append.apply(e,de(Object.entries(s.arguments).sort((function(e,n){return t in xe?xe[t].indexOf(e[0])-xe[t].indexOf(n[0]):0})).map((function(e){var t=document.createElement("z-"+e[0]);return t.append(Ee(e[1],!o,r)),t}))))}():"name"in s?((c=document.createElement("z-func")).setAttribute("name",s.name),c.append(Ee(s.display,!o,r))):"type"in s?((c=document.createElement("z-brackets")).setAttribute("type",s.type),c.append(Ee(s.contents,!o,r))):"latex"in s?(c=document.createElement("z-latex")).append(Ee(s.latex,!o,!1)):(c=n?document.createElement("z-selection"):new DocumentFragment,n&&c.setAttribute("pivot",s.pivot?"right":"left"),c.append(Ee(s.selection,n,r)),n=!1),i.append(c)}else if(n&&s===Y)i.append(document.createElement("z-cursor")),n=!1;else if("string"==typeof s)for(var l=0,u=Array.from(s);l<u.length;l++){var p=u[l],f=void 0,d="";/\d|\./.test(p)?f="z-num":ge.includes(p)?(r&&p in ve&&(p=ve[p]),"!"!=p&&(d="spaced"),f="z-op"):(f="z-var",/[a-zA-Z\u03AC-\u03FF]/.test(p)&&(d="italic"));var m=document.createElement(f);m.append(p),d.length>0&&m.setAttribute(d,""),i.append(m)}}}catch(e){a.e(e)}finally{a.f()}return i}function _e(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Pe("children"in e?e.children:e,t)}function Me(e){return Pe([e],!(arguments.length>1&&void 0!==arguments[1])||arguments[1])[0]}function Pe(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Array.from(e),o=[],i=!t||r.some((function(e){return"z-cursor"==e.tagName||"z-selection"==e.tagName})),a=0,s=r;a<s.length;a++){var c=s[a];if("z-"==c.tagName.substring(0,2).toLowerCase()){var l=c.tagName.substring(2).toLowerCase();if("cursor"==l)t&&(o.push(Y),t=!1);else if("selection"==l)if(t){var u,p=null!==(u=c.getAttribute("pivot"))&&void 0!==u?u:"left";o.push({selection:Pe(c.children,t,n),pivot:"right"==p}),t=!1}else o.push.apply(o,de(Pe(c.children,t,n)));else if("func"==l){var f,d,m=null!==(f=c.getAttribute("name"))&&void 0!==f?f:"";0==m.length&&(m=null!==(d=c.textContent)&&void 0!==d?d:""),o.push({name:m,display:Pe(c.children,!i,n)})}else if("brackets"==l){var h;o.push({type:null!==(h=c.getAttribute("type"))&&void 0!==h?h:"",contents:Pe(c.children,!i,n)})}else if("latex"==l)o.push({latex:Pe(c.children,!i,!1)});else if("var"==l||"num"==l||"op"==l){var b,y=null!==(b=c.textContent)&&void 0!==b?b:"";n&&y in ze&&(y=ze[y]),o.push(y)}else{var g,v,z={},w=fe(null!==(g=xe[l])&&void 0!==g?g:[]);try{for(w.s();!(v=w.n()).done;){var k=v.value,x=c.querySelector(":scope > z-"+k);if(x){var j=Pe(x.children,!i,n);z[k]=j}}}catch(e){w.e(e)}finally{w.f()}o.push({operator:l,arguments:z})}}}return o}function Re(){return ke||(ke=new V),ke}}(),r}()}));